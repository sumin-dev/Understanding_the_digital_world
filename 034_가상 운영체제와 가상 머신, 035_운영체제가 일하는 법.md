# 034_가상 운영체제와 가상 머신 #
### 운영체제의 과거와 현재 ###
* **초기 운영체제**는 메모리(100KB 미만)도 작고 작업이 단순했기 때문에 크기가 작았고, 한번에 한개의 프로그램이 실행되어 스와핑이 제한적.
  * 유닉스 운영체제 6판 : 1975년에 2명이 작성, C와 어셈블리 언어 9,000행   
* **현재**는 프로그램의 종류가 다양해지고 복잡해져서 운영체제 또한 매우 크고 복잡(메모리 단위 MB, GB/ 코드가 수백만 행 이상)
  * 리눅스 : 수십년간 수천명이 작업, 1천만행이 넘는다
  * 윈도우10 : 5천만 행 
### 가상 운영체제 ###
* **멀티부트 multiple boot**
  * 의도한 운영체제가 아닌 다른 운영체제를 실행할 수 있음(윈도우 컴퓨터에서 리눅스 실행 등)
  * 디스크에 몇 개의 운영체제를 저장해 두고 컴퓨터를 켤 때 어느 것을 실행할지 결정할 수 있는 기능
  * 애플의 부트 캠프 Boot Camp 기능(맥에서 윈도우를 실행)
* **가상 운영체제 virtual operating system**
  * VMware, VirtualBox, 오픈소스 Xen
  * 호스트 운영체제에서 다른 운영체제를 게스트 운영체제로 실행할 수 있음(맥OS에서 윈도우나 리눅스 실행) 
  * 호스트는 게스트가 생성하는 요청 중 파일 시스템 접근, 네트워크 접근 등 운영체제 권한이 필요한 요청을 가로챔
  * 호스트는 작업을 수행한 다음 게스트로 되돌아감.
  * 게스트 운영체제는 호스트 운영체제 입장에서 보면 보통의 애플리케이션.
  ![가상 운영체제](https://user-images.githubusercontent.com/109029407/183716360-bf1cd446-e03d-44cc-8212-18afa7563002.png)
* **가상 머신 virtual machine**
  * 컴퓨터인 것처럼 작동하는 프로그램
  * 소프트웨어로만 존재하지만 마치 하드웨어인 것처럼 그 작동 방식을 모방하는 프로그램
  * 물리적 장비를 만드는 것보다 프로그램을 작성해서 배포하는 것이 더 쉽고 유연하기 때문에 사용
  * AWS(Amazon Web Services, 아마존 웹 서비스)는 최대 클라우드 컴퓨팅 제공 업체   

---
# 035_운영체제가 일하는 법 #
### 부팅 booting ###
* **부팅의 과정**
  * 전원이 공급된 순간 각 장치를 검사하고 초기화하는 과정을 거쳐 컴퓨터가 작업할 수 있는 환경이 될 때 까지의 과정
    1. 프로세서는 컴퓨터가 켜졌을 때 영구 기억 장치에 저장된 약간의 명령어를 실행해서 작동을 시작하도록 구성
    2. 이 명령어로 작은 플래시 메모리에서 명령어를 읽음(디스크상의 위치, USB 메모리, 네트워크 연결 등)
    3. 플래시 메모리의 명령어는 작업하기 충분한 코드가 될 때까지 더욱더 많은 명령어를 읽음
  * '자력으로 해내다'라는 표현의 부트스트래핑 bootstrapping이 어원
* **운영체제가 일하는 법**
  * 실행할 준비가 된 애플리케이션에 차례로 통제권을 주며 짧은 시간 조각을 할당(시간 조각은 할당된 시간이 다 되면 끝남)
  * 이벤트가 발생하면 해당 이벤트를 처리해야 하는 애플리케이션에 전달
    1. 사용자가 창의 위쪽 모서리에 있는 작은 X를 클릭해서 애플리케이션을 종료
    2. 운영체제는 애플리케이션에 종료를 통보해서 남은 일을 정리할 기회를 줌(사용자에게 '파일을 저장하시겠습니까?' 묻기 등)
    3. 운영체제는 프로그램이 사용하던 모든 자원을 회수. 다른 애플리케이션에 창을 노출하라고 알려줌.
* **시스템 콜 system call**
  * 애플리케이션이 운영체제에 서비스를 요청하는 진입점을 의미
    * 운영체제는 애플리케이션이 구축될 수 있는 플랫폼을 제공
    * 애플리케이션은 운영체제의 특정 부분에 통제권을 넘겨주는 특별한 명령어를 실행함으로써 서비스를 요청
    * 운영체제는 요청을 처리하고, 통제권과 처리 결과를 애플리케이션에게 돌려줌
* **디바이스 드라이버**
  * 운영체제와 하드웨어 장치(프린터, 마우스 등) 간에 가교 역할을 하는 코드 
  * 어떠한 새로운 장치를 연결해 사용할 때 컴퓨터는 이게 마우스인지 키보드인지 어떻게 작동하는 장치인지 알 수 없다. 그래서 컴퓨터가 이 장치를 동작시킬 때 어떻게 동작되어야 하는지에 대한 프로그램을 따로 설치.
  * 운영체제가 추상적이거나 이상화된 장치에 포괄적인 요청을하고, 드라이버가 특정 장치에 맞게 요청을 구체적으로 구현.
  * 범용 운영체제에는 많은 디바이스 드라이버가 있음(윈도우는 소비자들이 사용할만한 장치의 드라이버를 이미 설치한 상태로 출하)
  * 기술의 발달덕분에 장치들은 전반적으로 성능 좋은 프로세서, 용량이 큰 메모리 등을 내장하여 범용 컴퓨터와 비슷한 모습을 띠고 있다.
  * 별도의 운영체제를 만들기보다는 범용 운영체제를 사용하는 방식이 더 타당함.
   
